webpackJsonp([8],{J4v2:function(e,s){},bMi2:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("Dd8w"),i=t.n(r),a=t("E4LH"),o=t("mCTZ"),l={name:"login",data:function(){return{loginForm:{user:"",password:""},loginRules:{user:[{required:!0,message:"请输入用户名/邮箱",trigger:"blur"},{validator:function(e,s,t){null!=s.match(/@/)?/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/.test(s)?t():t(new Error("邮箱格式错误")):/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(s)?t():t(new Error("手机号格式错误"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"请输入6-20位包含数字和字母的密码",trigger:"blur"},{validator:a.a.FormValidate.Form().checkPassWord,trigger:"blur"}]},isAliyun:!1,verifyId:"",isDisabled:!1}},methods:{loginClick:function(e){var s=this;this.$refs[e].validate(function(t){if(!t)return!1;s.isDisabled=!0,s.$api.login(i()({username:s.loginForm.user,password:s.loginForm.password},s.verifyForm)).then(function(t){s.isDisabled=!1,s.$refs[e].resetFields(),localStorage.setItem("passport",t.messages.data.session.id),Object(o.c)(function(e){1==e?(s.$message("登录成功"),s.$router.push({path:"/"})):s.$message.error(e)})}).catch(function(t){if(s.isDisabled=!1,"verify_required"==t.messages.error.code){var r=JSON.parse(t.messages.error.message)[0];s.verifyId=r.verifyId,"anti_robot"==r.verifyType&&(s.isAliyun=!0,Object(o.a)(s.verifyId,function(t){s.isAliyun=!1,s.verifyForm=t.messages.data,s.loginClick(e)}))}else s.$message.error(t.messages.error.message)})})}}},n={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"userOperate",attrs:{id:"userOperate"}},[t("el-row",{staticClass:"userAction"},[t("el-col",{staticClass:"center",attrs:{span:12}},[t("img",{attrs:{src:"/static/image/loignImg.png",width:"408"}})]),e._v(" "),t("el-col",{staticClass:"userActionItem",attrs:{span:12}},[t("p",{staticClass:"userActionTitle"},[e._v("登录")]),e._v(" "),t("el-form",{ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules,disabled:e.isDisabled}},[t("el-form-item",{attrs:{prop:"user"}},[t("el-input",{attrs:{type:"text",placeholder:"手机号/邮箱",maxlength:"30"},model:{value:e.loginForm.user,callback:function(s){e.$set(e.loginForm,"user",s)},expression:"loginForm.user"}},[t("img",{attrs:{slot:"prefix",src:"/static/image/login_icon_user.png"},slot:"prefix"})])],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"6-20位登录密码",maxlength:"20","show-password":""},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")?null:e.loginClick("loginForm")}},model:{value:e.loginForm.password,callback:function(s){e.$set(e.loginForm,"password",s)},expression:"loginForm.password"}},[t("img",{attrs:{slot:"prefix",src:"/static/image/login_icon_psw.png"},slot:"prefix"})])],1),e._v(" "),t("el-form-item",[t("el-row",{staticClass:"userActionTips"},[t("el-col",{attrs:{span:12}},[t("router-link",{staticStyle:{color:"rgba(0,0,0,1)"},attrs:{to:"/forgetPassword"}},[e._v("忘记密码")])],1),e._v(" "),t("el-col",{staticClass:"right",attrs:{span:12}},[e._v("\n              新用户？\n              "),t("router-link",{staticClass:"check",attrs:{to:"/register"}},[e._v("去注册")])],1)],1)],1),e._v(" "),t("el-form-item",{staticClass:"operateBtn center"},[t("button",{staticClass:"roundBtn",attrs:{type:"button",disabled:e.isDisabled},on:{click:function(s){return e.loginClick("loginForm")}}},[e._v("登 录")])])],1)],1)],1),e._v(" "),t("el-dialog",{staticClass:"dialogTitle",attrs:{visible:e.isAliyun,width:"350px","close-on-click-modal":!1},on:{"update:visible":function(s){e.isAliyun=s}}},[t("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"title-age"},[e._v("人机验证")])]),e._v(" "),t("div",{attrs:{id:"captcha"}})])],1)},staticRenderFns:[]};var c=t("VU/8")(l,n,!1,function(e){t("J4v2")},"data-v-b0eccfa8",null);s.default=c.exports}});
//# sourceMappingURL=8.b1fdbe2131fcbc78721e.js.map