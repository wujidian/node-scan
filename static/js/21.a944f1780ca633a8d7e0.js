webpackJsonp([21],{H9UM:function(s,e){},pUDZ:function(s,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=o("Dd8w"),a=o.n(t),r=o("E4LH"),d=o("mCTZ"),n=o("NYxO"),i={name:"fundPassword",data:function(){var s=this;return{addFundPasswordForm:{fundPassword:"",confirmPassword:"",code:""},addFundPasswordRules:{fundPassword:[{required:!0,message:"请输入资金密码",trigger:"blur"},{validator:r.a.FormValidate.Form().checkCode,trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:r.a.FormValidate.Form().checkCode,trigger:"blur"},{validator:function(e,o,t){o!==s.addFundPasswordForm.fundPassword?t(new Error("密码不一致")):t()},trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:r.a.FormValidate.Form().checkCode,trigger:"blur"}]},mode:this.$store.state.info.hasMobile?"mobile":"email",isDisable:!1}},methods:{getFundPasswordCode:function(s){var e=this,o=0,t=[];this.$refs.addFundPasswordForm.validateField(["fundPassword","confirmPassword"],function(a){if(a)return!1;t.push(!a),2==++o&&e.$api.sendFundCode({sessionId:localStorage.getItem("passport"),type:e.mode}).then(function(o){Object(d.b)(s),e.$message("验证码发送成功")}).catch(function(s){e.$message.error(s.message)})})},editFundPassword:function(s){var e=this;this.$refs[s].validate(function(s){if(!s)return!1;e.isDisable=!0,e.$api.updateFundPassword({sessionId:localStorage.getItem("passport"),code:e.addFundPasswordForm.code,payPassword:e.addFundPasswordForm.fundPassword}).then(function(s){e.isDisable=!1,e.$message("资金密码修改成功"),e.resetForm("addFundPasswordForm"),Object(d.c)()}).catch(function(s){e.isDisable=!1,e.$message.error(s.message),e.resetForm("addFundPasswordForm")})})},resetForm:function(s){this.$refs[s].resetFields()}},mounted:function(){},computed:a()({},Object(n.b)(["changeInfo"])),watch:{changeInfo:function(s,e){this.mode=this.$store.state.info.hasMobile?"mobile":"email"}}},l={render:function(){var s=this,e=s.$createElement,o=s._self._c||e;return o("div",{staticClass:"fundPassword"},[o("el-form",{ref:"addFundPasswordForm",attrs:{model:s.addFundPasswordForm,rules:s.addFundPasswordRules,"label-position":"top",size:"small","hide-required-asterisk":""}},[o("el-form-item",{attrs:{label:"新资金密码",prop:"fundPassword"}},[o("el-input",{attrs:{placeholder:"6位数字资金密码",maxlength:"6",type:"password","show-password":""},model:{value:s.addFundPasswordForm.fundPassword,callback:function(e){s.$set(s.addFundPasswordForm,"fundPassword",e)},expression:"addFundPasswordForm.fundPassword"}})],1),s._v(" "),o("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[o("el-input",{attrs:{placeholder:"请再次输入资金密码",maxlength:"6",type:"password","show-password":""},model:{value:s.addFundPasswordForm.confirmPassword,callback:function(e){s.$set(s.addFundPasswordForm,"confirmPassword",e)},expression:"addFundPasswordForm.confirmPassword"}})],1),s._v(" "),s.$store.state.info.hasMobile&&"mobile"==s.mode?o("el-form-item",{attrs:{label:"短信验证码",prop:"code"}},[o("el-row",[o("el-col",{attrs:{span:17}},[o("el-input",{attrs:{placeholder:"请输入验证码",maxlength:"6"},model:{value:s.addFundPasswordForm.code,callback:function(e){s.$set(s.addFundPasswordForm,"code",e)},expression:"addFundPasswordForm.code"}})],1),s._v(" "),o("el-col",{staticClass:"right",attrs:{span:7}},[o("button",{staticClass:"roundBtn rimBtn",attrs:{type:"button",id:"SMSBtn"},on:{click:function(e){return s.getFundPasswordCode("SMSBtn")}}},[s._v("发送验证码")])])],1),s._v(" "),o("div",[o("button",{directives:[{name:"show",rawName:"v-show",value:s.$store.state.info.hasEmail,expression:"$store.state.info.hasEmail"}],staticClass:"textBtn",attrs:{type:"button"},on:{click:function(e){s.mode="email"}}},[s._v("切换邮箱验证")])])],1):s._e(),s._v(" "),s.$store.state.info.hasEmail&&"email"==s.mode?o("el-form-item",{attrs:{label:"邮箱验证码",prop:"code"}},[o("el-row",[o("el-col",{attrs:{span:17}},[o("el-input",{attrs:{placeholder:"请输入验证码",maxlength:"6"},model:{value:s.addFundPasswordForm.code,callback:function(e){s.$set(s.addFundPasswordForm,"code",e)},expression:"addFundPasswordForm.code"}})],1),s._v(" "),o("el-col",{staticClass:"right",attrs:{span:7}},[o("button",{staticClass:"roundBtn rimBtn",attrs:{type:"button",id:"mailboxBtn"},on:{click:function(e){return s.getFundPasswordCode("mailboxBtn")}}},[s._v("发送验证码")])])],1),s._v(" "),o("div",[o("button",{directives:[{name:"show",rawName:"v-show",value:s.$store.state.info.hasMobile,expression:"$store.state.info.hasMobile"}],staticClass:"textBtn",attrs:{type:"button"},on:{click:function(e){s.mode="mobile"}}},[s._v("切换短信验证")])])],1):s._e(),s._v(" "),o("el-form-item",{staticClass:"center",attrs:{label:""}},[o("button",{staticClass:"roundBtn",attrs:{type:"button",disabled:s.isDisable},on:{click:function(e){return s.editFundPassword("addFundPasswordForm")}}},[s._v("确认更改")])])],1)],1)},staticRenderFns:[]};var u=o("VU/8")(i,l,!1,function(s){o("H9UM")},"data-v-382ccf66",null);e.default=u.exports}});
//# sourceMappingURL=21.a944f1780ca633a8d7e0.js.map