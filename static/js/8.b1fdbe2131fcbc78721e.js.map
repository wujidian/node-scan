{"version":3,"sources":["webpack:///src/pages/personalCenter/login.vue","webpack:///./src/pages/personalCenter/login.vue?f248","webpack:///./src/pages/personalCenter/login.vue"],"names":["login","name","data","loginForm","user","password","loginRules","required","message","trigger","validator","rule","value","callback","match","test","Error","min","max","validate","FormValidate","Form","checkPassWord","isAliyun","verifyId","isDisabled","methods","loginClick","formName","_this","this","$refs","valid","$api","extends_default","username","verifyForm","then","res","resetFields","localStorage","setItem","messages","session","id","Object","comm","$message","$router","push","path","error","catch","err","code","JSON","parse","verifyType","personalCenter_login","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","span","src","width","_v","ref","model","rules","disabled","prop","type","placeholder","maxlength","$$v","$set","expression","slot","show-password","nativeOn","keyup","$event","indexOf","_k","keyCode","key","staticStyle","color","to","on","click","visible","close-on-click-modal","update:visible","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.b1fdbe2131fcbc78721e.js","sourcesContent":["<template>\n  <div class=\"userOperate\" id=\"userOperate\">\n    <el-row class=\"userAction\">\n      <el-col :span=\"12\" class=\"center\">\n        <img src=\"/static/image/loignImg.png\" width=\"408\" />\n      </el-col>\n      <el-col :span=\"12\" class=\"userActionItem\">\n        <p class=\"userActionTitle\">登录</p>\n        <el-form :model=\"loginForm\" :rules=\"loginRules\" ref=\"loginForm\" :disabled=\"isDisabled\">\n          <el-form-item prop=\"user\">\n            <el-input type=\"text\" v-model=\"loginForm.user\" placeholder=\"手机号/邮箱\" maxlength=\"30\">\n              <img src=\"/static/image/login_icon_user.png\" slot=\"prefix\" />\n            </el-input>\n          </el-form-item>\n          <el-form-item prop=\"password\">\n            <el-input\n              type=\"password\"\n              v-model=\"loginForm.password\"\n              placeholder=\"6-20位登录密码\"\n              maxlength=\"20\"\n              show-password\n              @keyup.enter.native=\"loginClick('loginForm')\"\n            >\n              <img slot=\"prefix\" src=\"/static/image/login_icon_psw.png\" />\n            </el-input>\n          </el-form-item>\n          <el-form-item>\n            <el-row class=\"userActionTips\">\n              <el-col :span=\"12\">\n                <router-link to=\"/forgetPassword\" style=\"color:rgba(0,0,0,1)\">忘记密码</router-link>\n              </el-col>\n              <el-col :span=\"12\" class=\"right\">\n                新用户？\n                <router-link class=\"check\" to=\"/register\">去注册</router-link>\n              </el-col>\n            </el-row>\n          </el-form-item>\n          <el-form-item class=\"operateBtn center\">\n            <button\n              type=\"button\"\n              class=\"roundBtn\"\n              @click=\"loginClick('loginForm')\"\n              :disabled=\"isDisabled\"\n            >登 录</button>\n          </el-form-item>\n        </el-form>\n      </el-col>\n    </el-row>\n    <!-- 人机验证 -->\n    <el-dialog\n      :visible.sync=\"isAliyun\"\n      width=\"350px\"\n      :close-on-click-modal=\"false\"\n      class=\"dialogTitle\"\n    >\n      <div slot=\"title\" class=\"header-title\">\n        <span class=\"title-age\">人机验证</span>\n      </div>\n      <div id=\"captcha\"></div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport validate from \"@/utils/validate\";\nimport { codeMsg } from \"@/utils/comm.js\";\nimport { aliyunVerify, getUserInfo } from \"@/utils/comm\";\nexport default {\n  name: \"login\",\n  data() {\n    // 手机号邮箱验证\n    var checkUser = (rule, value, callback) => {\n      if (value.match(/@/) != null) {\n        var reg = /[\\w!#$%&'*+/=?^_`{|}~-]+(?:\\.[\\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\\w](?:[\\w-]*[\\w])?\\.)+[\\w](?:[\\w-]*[\\w])?/;\n        if (!reg.test(value)) {\n          callback(new Error(\"邮箱格式错误\"));\n        } else {\n          callback();\n        }\n      } else {\n        var reg = /^[1][3,4,5,6,7,8,9][0-9]{9}$/;\n        if (!reg.test(value)) {\n          callback(new Error(\"手机号格式错误\"));\n        } else {\n          callback();\n        }\n      }\n    };\n    return {\n      loginForm: {\n        user: \"\",\n        password: \"\"\n      },\n      loginRules: {\n        user: [\n          { required: true, message: \"请输入用户名/邮箱\", trigger: \"blur\" },\n          { validator: checkUser, trigger: \"blur\" }\n        ],\n        password: [\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\n          {\n            min: 6,\n            max: 20,\n            message: \"请输入6-20位包含数字和字母的密码\",\n            trigger: \"blur\"\n          },\n          {\n            validator: validate.FormValidate.Form().checkPassWord,\n            trigger: \"blur\"\n          }\n        ]\n      },\n      isAliyun: false,\n      verifyId: \"\",\n      isDisabled: false\n    };\n  },\n  methods: {\n    loginClick(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.isDisabled = true;\n          this.$api\n            .login({\n              username: this.loginForm.user,\n              password: this.loginForm.password,\n              ...this.verifyForm\n            })\n            .then(res => {\n              this.isDisabled = false;\n              this.$refs[formName].resetFields();\n              localStorage.setItem(\"passport\", res.messages.data.session.id);\n              getUserInfo(res => {\n                if (res == true) {\n                  this.$message(\"登录成功\");\n                  this.$router.push({ path: \"/\" });\n                } else {\n                  this.$message.error(res);\n                }\n              });\n            })\n            .catch(err => {\n              this.isDisabled = false;\n              if (err.messages.error.code == \"verify_required\") {\n                var data = JSON.parse(err.messages.error.message)[0];\n                this.verifyId = data.verifyId;\n                if (data.verifyType == \"anti_robot\") {\n                  this.isAliyun = true;\n                  aliyunVerify(this.verifyId, res => {\n                    this.isAliyun = false;\n                    this.verifyForm = res.messages.data;\n                    this.loginClick(formName);\n                  });\n                }\n              } else {\n                this.$message.error(err.messages.error.message);\n              }\n            });\n        } else {\n          return false;\n        }\n      });\n    }\n  }\n};\n</script>\n<style scoped>\n.right {\n  text-align: right;\n}\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/pages/personalCenter/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"userOperate\",attrs:{\"id\":\"userOperate\"}},[_c('el-row',{staticClass:\"userAction\"},[_c('el-col',{staticClass:\"center\",attrs:{\"span\":12}},[_c('img',{attrs:{\"src\":\"/static/image/loignImg.png\",\"width\":\"408\"}})]),_vm._v(\" \"),_c('el-col',{staticClass:\"userActionItem\",attrs:{\"span\":12}},[_c('p',{staticClass:\"userActionTitle\"},[_vm._v(\"登录\")]),_vm._v(\" \"),_c('el-form',{ref:\"loginForm\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.loginRules,\"disabled\":_vm.isDisabled}},[_c('el-form-item',{attrs:{\"prop\":\"user\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"手机号/邮箱\",\"maxlength\":\"30\"},model:{value:(_vm.loginForm.user),callback:function ($$v) {_vm.$set(_vm.loginForm, \"user\", $$v)},expression:\"loginForm.user\"}},[_c('img',{attrs:{\"slot\":\"prefix\",\"src\":\"/static/image/login_icon_user.png\"},slot:\"prefix\"})])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"6-20位登录密码\",\"maxlength\":\"20\",\"show-password\":\"\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.loginClick('loginForm')}},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}},[_c('img',{attrs:{\"slot\":\"prefix\",\"src\":\"/static/image/login_icon_psw.png\"},slot:\"prefix\"})])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-row',{staticClass:\"userActionTips\"},[_c('el-col',{attrs:{\"span\":12}},[_c('router-link',{staticStyle:{\"color\":\"rgba(0,0,0,1)\"},attrs:{\"to\":\"/forgetPassword\"}},[_vm._v(\"忘记密码\")])],1),_vm._v(\" \"),_c('el-col',{staticClass:\"right\",attrs:{\"span\":12}},[_vm._v(\"\\n              新用户？\\n              \"),_c('router-link',{staticClass:\"check\",attrs:{\"to\":\"/register\"}},[_vm._v(\"去注册\")])],1)],1)],1),_vm._v(\" \"),_c('el-form-item',{staticClass:\"operateBtn center\"},[_c('button',{staticClass:\"roundBtn\",attrs:{\"type\":\"button\",\"disabled\":_vm.isDisabled},on:{\"click\":function($event){return _vm.loginClick('loginForm')}}},[_vm._v(\"登 录\")])])],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{staticClass:\"dialogTitle\",attrs:{\"visible\":_vm.isAliyun,\"width\":\"350px\",\"close-on-click-modal\":false},on:{\"update:visible\":function($event){_vm.isAliyun=$event}}},[_c('div',{staticClass:\"header-title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('span',{staticClass:\"title-age\"},[_vm._v(\"人机验证\")])]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"captcha\"}})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b0eccfa8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/personalCenter/login.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b0eccfa8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b0eccfa8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b0eccfa8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/personalCenter/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}