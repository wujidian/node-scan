webpackJsonp([2],{"47pS":function(e,i){},"9iXV":function(e,i,t){"use strict";var n={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"phoneCity"},[t("div",{staticClass:"countryChange"},[t("span",[e._v("+"+e._s(e.country.tel))]),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.countriesShow,expression:"!countriesShow"}],staticClass:"el-icon-arrow-right"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.countriesShow,expression:"countriesShow"}],staticClass:"el-icon-arrow-down"})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.countriesShow,expression:"countriesShow"}],staticClass:"countries"},[t("el-scrollbar",{staticStyle:{height:"100%"}},e._l(e.countries,function(i,n){return t("div",{key:n,staticClass:"countryItem",class:{countryNow:i.tel==e.country.tel}},[e._v(e._s(i.name))])}),0)],1)])},staticRenderFns:[]};var s=t("VU/8")({name:"country",data:function(){return{countries:[],countriesShow:!1,country:""}},methods:{getCountry:function(){var e=this;this.$api.getCountry().then(function(i){e.countries=i.messages.data.countries,e.countryName=i.messages.data.country,e.country=i.messages.data.countries.find(function(e){return"86"==e.tel}),e.$emit("getCountry",e.country)})},checkCountry:function(e){this.country=e,this.countriesShow=!this.countriesShow,this.$emit("getCountry",this.country)}},mounted:function(){this.getCountry()}},n,!1,function(e){t("47pS")},"data-v-3e1abe2f",null);i.a=s.exports},HNO6:function(e,i){},R8H7:function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("Dd8w"),s=t.n(n),o=t("E4LH"),r=t("9iXV"),a=t("mCTZ"),l=t("NYxO"),c={name:"userInfo",components:{country:r.a},data:function(){var e=this;return{basicInfo:{},bindingDialog:!1,bindingForm:{email:"",verifyCode:"",mobile:"",country:""},isAliyun:!1,verifyToken:"",bindingRules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:function(i,t,n){/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/.test(t)?e.$api.registerEmail({action:"validateEmail",email:e.bindingForm.email}).then(function(e){n()}).catch(function(e){n(new Error(e.messages.error.message))}):n(new Error("邮箱格式错误"))},trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(i,t,n){/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(t)?e.$api.registerMobile({country:e.bindingForm.country.id,action:"validateMobile",mobile:e.bindingForm.mobile}).then(function(e){n()}).catch(function(e){n(new Error(e.messages.error.message))}):n(new Error("手机号格式错误"))},trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:6,max:6,message:"请输入6位数字的验证码",trigger:"blur"},{validator:o.a.FormValidate.Form().checkCode,trigger:"blur"}]},bindingOperation:"",validCodeFrom:"",verifyInfo:"",verify:"",unBindingOperation:"email",unBindingDialog:!1,unBindingForm:{verifyCode:""},unBindingRules:{verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:6,max:20,message:"请输入6位数字的验证码",trigger:"blur"},{validator:o.a.FormValidate.Form().checkCode,trigger:"blur"}]},verifyId:""}},methods:{binding:function(){var e=this;"mobile"==this.bindingOperation?this.$api.registerMobile(s()({mobile:this.bindingForm.mobile,link:!0},this.verifyInfo)).then(function(i){e.bindingDialog=!1,e.$message("手机号码已成功绑定"),Object(a.c)()}).catch(function(i){e.$message.error(i.messages.error.message)}):this.$api.registerEmail(s()({email:this.bindingForm.email,link:!0},this.verifyInfo)).then(function(i){e.bindingDialog=!1,e.$message("邮箱绑定成功"),Object(a.c)()}).catch(function(i){e.$message.error(i.messages.error.message)})},getCode:function(e){var i=this;"email"==this.bindingOperation?this.$refs.bindingForm.validateField(["email"],function(t){if(t)return!1;i.$api.registerEmail({action:"validateEmailSend",email:i.bindingForm.email,verifyToken:i.verifyToken}).then(function(t){i.$message("验证码已成功发送。"),i.validCodeFrom=t.messages.data.verifyInfo,Object(a.b)(e)}).catch(function(e){"verify_required"==e.messages.error.code&&(i.isAliyun=!0,Object(a.a)("",function(e){i.isAliyun=!1,i.verifyToken=e.messages.data.verifyToken,i.getCode("bindingCode")}))})}):this.$refs.bindingForm.validateField(["mobile"],function(t){if(t)return!1;i.$api.registerMobile({action:"validateMobileSend",mobile:"+"+i.bindingForm.country.tel+i.bindingForm.mobile,country:i.bindingForm.country.id,verifyToken:i.verifyToken,sign:"168node"}).then(function(t){i.$message("验证码已成功发送。"),i.validCodeFrom=t.messages.data.verifyInfo,Object(a.b)(e)}).catch(function(e){"verify_required"==e.messages.error.code&&(i.isAliyun=!0,Object(a.a)("",function(e){i.isAliyun=!1,i.verifyToken=e.messages.data.verifyToken,i.getCode("bindingCode")}))})})},getCountry:function(e,i){"register"==i&&(this.bindingForm.country=e)},unBindingClick:function(){var e=this,i="";i="mobile"==this.unBindingOperation?this.$store.state.info.mobile:this.$store.state.info.email,this.$api.unRegister({loginId:i,loginType:this.unBindingOperation}).catch(function(i){try{e.verifyId=JSON.parse(i.messages.error.message)[0].verifyId}catch(t){e.$message.error(i.messages.error.message)}})},unBinding:function(){var e=this,i="";i="mobile"==this.unBindingOperation?this.$store.state.info.mobile:this.$store.state.info.email,this.$api.unRegister(s()({loginId:i,loginType:this.unBindingOperation},this.verifyInfo)).then(function(i){e.unBindingDialog=!1,e.$message("取消绑定成功"),Object(a.c)()}).catch(function(i){try{e.verifyId=JSON.parse(i.messages.error.message)[0].verifyId}catch(t){e.$message.error(i.messages.error.message)}})},getUnBindingCode:function(e){var i=this;this.$api.checkCaptcha({action:"refresh",verifyId:this.verifyId,sign:"168node"}).then(function(t){i.$message("验证码已成功发送。"),i.verify=t.messages.data,Object(a.b)(e)}).catch(function(e){i.$message.error(e.messages.error.message)})},checkCode:function(e){var i=this;this.$refs[e].validate(function(e){if(!e)return!1;"mobile"==i.bindingOperation?i.$api.registerMobile(s()({action:"validateMobileVerify",mobile:i.bindingForm.mobile,verifyCode:i.bindingForm.verifyCode},i.validCodeFrom)).then(function(e){i.verifyInfo=e.messages.data.verifyInfo,i.binding()}).catch(function(e){i.$message.error("验证码错误")}):i.$api.registerEmail(s()({action:"validateEmailVerify",email:i.bindingForm.email,verifyCode:i.bindingForm.verifyCode},i.validCodeFrom)).then(function(e){i.verifyInfo=e.messages.data.verifyInfo,i.binding()}).catch(function(e){i.$message.error("验证码错误")})})},unBidingCode:function(e){var i=this;this.$refs[e].validate(function(e){if(!e)return!1;i.$api.checkCaptcha(s()({action:"verify",verifyCode:i.unBindingForm.verifyCode},i.verify)).then(function(e){i.verifyInfo=e.messages.data,i.unBinding()}).catch(function(e){i.$message.error("验证码错误")})})},resetForm:function(e){this.$refs[e].resetFields()}},computed:s()({},Object(l.b)(["changeInfo"]))},d={render:function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"userInfo"},[t("el-form",{attrs:{"label-position":"top",size:"small"}},[t("el-form-item",{attrs:{label:"昵称"}},[t("el-input",{attrs:{disabled:""},model:{value:this.$store.state.info.nickName,callback:function(i){e.$set(this.$store.state.info,"nickName",i)},expression:"this.$store.state.info.nickName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号"}},[t("el-row",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.info.hasMobile,expression:"this.$store.state.info.hasMobile"}]},[t("el-col",{attrs:{span:20}},[this.$store.state.info.hasMobile?t("el-input",{attrs:{disabled:""},model:{value:this.$store.state.info.mobile,callback:function(i){e.$set(this.$store.state.info,"mobile",i)},expression:"this.$store.state.info.mobile"}}):e._e()],1),e._v(" "),t("el-col",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.info.hasMobile&&this.$store.state.info.hasEmail,expression:"this.$store.state.info.hasMobile && this.$store.state.info.hasEmail"}],staticClass:"center",attrs:{span:4}},[t("span",{staticClass:"unBinding",on:{click:function(i){e.unBindingDialog=!0,e.unBindingOperation="mobile",e.unBindingClick()}}},[e._v("解绑")])])],1),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.info.hasMobile,expression:"!this.$store.state.info.hasMobile"}],staticClass:"normalBtn rimBtn",attrs:{type:"button"},on:{click:function(i){e.bindingDialog=!0,e.bindingOperation="mobile"}}},[e._v("绑 定")])],1),e._v(" "),t("el-form-item",{attrs:{label:"邮箱"}},[t("el-row",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.info.hasEmail,expression:"this.$store.state.info.hasEmail"}]},[t("el-col",{attrs:{span:20}},[t("el-input",{attrs:{disabled:""},model:{value:this.$store.state.info.email,callback:function(i){e.$set(this.$store.state.info,"email",i)},expression:"this.$store.state.info.email"}})],1),e._v(" "),t("el-col",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.info.hasMobile&&this.$store.state.info.hasEmail,expression:"this.$store.state.info.hasMobile && this.$store.state.info.hasEmail"}],staticClass:"center",attrs:{span:4}},[t("span",{staticClass:"unBinding",on:{click:function(i){e.unBindingDialog=!0,e.unBindingOperation="email",e.unBindingClick()}}},[e._v("解绑")])])],1),e._v(" "),t("button",{directives:[{name:"show",rawName:"v-show",value:!this.$store.state.info.hasEmail,expression:"!this.$store.state.info.hasEmail "}],staticClass:"normalBtn rimBtn",attrs:{type:"button"},on:{click:function(i){e.bindingDialog=!0,e.bindingOperation="email"}}},[e._v("绑定")])],1)],1),e._v(" "),t("el-dialog",{staticClass:"dialogTitle",attrs:{visible:e.bindingDialog,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(i){e.bindingDialog=i},close:function(i){return e.resetForm("bindingForm")}}},[t("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"title-age"},[e._v(e._s("mobile"==e.bindingOperation?"绑定手机号":"绑定邮箱"))])]),e._v(" "),t("el-form",{ref:"bindingForm",attrs:{model:e.bindingForm,"label-position":"top",size:"small","hide-required-asterisk":"",rules:e.bindingRules}},["email"==e.bindingOperation?t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{maxlength:"50"},model:{value:e.bindingForm.email,callback:function(i){e.$set(e.bindingForm,"email",i)},expression:"bindingForm.email"}})],1):e._e(),e._v(" "),"mobile"==e.bindingOperation?t("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[t("el-input",{model:{value:e.bindingForm.mobile,callback:function(i){e.$set(e.bindingForm,"mobile",i)},expression:"bindingForm.mobile"}},[t("country",{attrs:{slot:"prefix"},on:{getCountry:function(i){return e.getCountry(i,"register")}},slot:"prefix"})],1)],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"验证码",prop:"verifyCode"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{maxlength:"6"},model:{value:e.bindingForm.verifyCode,callback:function(i){e.$set(e.bindingForm,"verifyCode",i)},expression:"bindingForm.verifyCode"}})],1),e._v(" "),t("el-col",{attrs:{span:6}},[t("button",{staticClass:"textBtn",attrs:{type:"button",id:"bindingCode"},on:{click:function(i){return e.getCode("bindingCode")}}},[e._v("获取验证码")])])],1)],1),e._v(" "),t("el-form-item",{staticClass:"center"},[t("button",{staticClass:"roundBtn",attrs:{type:"button"},on:{click:function(i){return e.checkCode("bindingForm")}}},[e._v("确 认")])])],1)],1),e._v(" "),t("el-dialog",{staticClass:"dialogTitle",attrs:{visible:e.unBindingDialog,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(i){e.unBindingDialog=i},close:function(i){return e.resetForm("unBindingForm")}},nativeOn:{submit:function(e){e.preventDefault()}}},[t("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"title-age"},[e._v(e._s("mobile"==e.unBindingOperation?"解绑手机号":"解绑邮箱"))])]),e._v(" "),t("el-form",{ref:"unBindingForm",attrs:{model:e.unBindingForm,"label-position":"top",size:"small","hide-required-asterisk":"",rules:e.unBindingRules}},[t("el-form-item",{attrs:{label:"验证码",prop:"verifyCode"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{type:"text",maxlength:"6"},model:{value:e.unBindingForm.verifyCode,callback:function(i){e.$set(e.unBindingForm,"verifyCode",i)},expression:"unBindingForm.verifyCode"}})],1),e._v(" "),t("el-col",{attrs:{span:6}},[t("button",{staticClass:"textBtn",attrs:{type:"button",id:"getCode"},on:{click:function(i){return e.getUnBindingCode("getCode")}}},[e._v("获取验证码")])])],1)],1),e._v(" "),t("el-form-item",{staticClass:"center"},[t("button",{staticClass:"roundBtn",attrs:{type:"button"},on:{click:function(i){return e.unBidingCode("unBindingForm")}}},[e._v("确认")])])],1)],1),e._v(" "),t("el-dialog",{staticClass:"dialogTitle",attrs:{visible:e.isAliyun,width:"350px","close-on-click-modal":!1},on:{"update:visible":function(i){e.isAliyun=i}}},[t("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"title-age"},[e._v("人机验证")])]),e._v(" "),t("div",{attrs:{id:"captcha"}})])],1)},staticRenderFns:[]};var u=t("VU/8")(c,d,!1,function(e){t("HNO6")},"data-v-4584993e",null);i.default=u.exports}});
//# sourceMappingURL=2.aa2e978e0fdc8b4307f3.js.map