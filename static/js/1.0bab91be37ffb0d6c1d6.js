webpackJsonp([1],{"47pS":function(e,r){},"9iXV":function(e,r,t){"use strict";var i={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"phoneCity"},[t("div",{staticClass:"countryChange"},[t("span",[e._v("+"+e._s(e.country.tel))]),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.countriesShow,expression:"!countriesShow"}],staticClass:"el-icon-arrow-right"}),e._v(" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.countriesShow,expression:"countriesShow"}],staticClass:"el-icon-arrow-down"})]),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.countriesShow,expression:"countriesShow"}],staticClass:"countries"},[t("el-scrollbar",{staticStyle:{height:"100%"}},e._l(e.countries,function(r,i){return t("div",{key:i,staticClass:"countryItem",class:{countryNow:r.tel==e.country.tel}},[e._v(e._s(r.name))])}),0)],1)])},staticRenderFns:[]};var s=t("VU/8")({name:"country",data:function(){return{countries:[],countriesShow:!1,country:""}},methods:{getCountry:function(){var e=this;this.$api.getCountry().then(function(r){e.countries=r.messages.data.countries,e.countryName=r.messages.data.country,e.country=r.messages.data.countries.find(function(e){return"86"==e.tel}),e.$emit("getCountry",e.country)})},checkCountry:function(e){this.country=e,this.countriesShow=!this.countriesShow,this.$emit("getCountry",this.country)}},mounted:function(){this.getCountry()}},i,!1,function(e){t("47pS")},"data-v-3e1abe2f",null);r.a=s.exports},iHiU:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("Dd8w"),s=t.n(i),o=t("E4LH"),a=t("9iXV"),n=t("mCTZ"),c={name:"register",components:{country:a.a},data:function(){var e=this;return{registration:"mobileRegister",registerForm:{country:"",mobile:"",password:"",comfirPassword:"",nickName:"",email:"",verifyCode:""},registerRules:{nickName:[{required:!0,message:"请输入昵称",trigger:"blur"},{validator:function(r,t,i){e.$api.register({action:"validateNickName",nickName:t}).then(function(e){i()}).catch(function(e){i(new Error(e.messages.error.message))})},trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:function(r,t,i){/^[1][3,4,5,6,7,8,9][0-9]{9}$/.test(t)?e.$api.registerMobile({country:e.registerForm.country.id,action:"validateMobile",mobile:e.registerForm.mobile,loginType:"mobile"}).then(function(e){i()}).catch(function(e){i(new Error(e.messages.error.message))}):i(new Error("手机号格式错误"))},trigger:"change"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:function(r,t,i){/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/.test(t)?e.$api.registerEmail({country:e.registerForm.country.id,action:"validateEmail",email:e.registerForm.email,loginType:"email"}).then(function(e){i()}).catch(function(e){i(new Error(e.messages.error.message))}):i(new Error("邮箱格式错误"))},trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"请输入6-20位包含数字和字母的密码",trigger:"blur"},{validator:function(r,t,i){new RegExp(/^(?![^a-zA-Z]+$)(?!\D+$)/).test(t)?(""!==e.registerForm.comfirPassword&&e.$refs.registerForm.validateField("comfirPassword"),i()):i(new Error("请输入6-20位包含数字和字母的密码"))},trigger:"blur"}],comfirPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{min:6,max:20,message:"请输入6-20位包含数字和字母的密码",trigger:"blur"},{validator:function(r,t,i){t!==e.registerForm.password?i(new Error("密码不一致")):i()},trigger:"blur"}],verifyCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:6,max:6,message:"请输入6位数字的验证码",trigger:"blur"},{validator:o.a.FormValidate.Form().checkCode,trigger:"blur"}]},verify:"",verifyInfo:"",isAliyun:!1,isDisable:!1}},methods:{checkCode:function(e){var r=this;this.$refs[e].validate(function(t){if(!t)return!1;r.isDisable=!0,"mobileRegister"==r.registration?r.$api.registerMobile(s()({action:"validateMobileVerify",mobile:r.registerForm.mobile,verifyCode:r.registerForm.verifyCode},r.verify)).then(function(t){r.verifyInfo=t.messages.data.verifyInfo,r.register(e)}).catch(function(e){r.isDisable=!1,r.$message.error("验证码错误")}):r.$api.registerEmail(s()({action:"validateEmailVerify",email:r.registerForm.email,verifyCode:r.registerForm.verifyCode},r.verify)).then(function(t){r.verifyInfo=t.messages.data.verifyInfo,r.register(e)}).catch(function(e){r.isDisable=!1,r.$message.error(e.messages.error.message)})})},register:function(e){var r=this;"mobileRegister"==this.registration?this.$api.registerMobile(s()({country:this.registerForm.country.id,mobile:this.registerForm.mobile,verifyCode:this.registerForm.verifyCode,nickName:this.registerForm.nickName,password:this.registerForm.password},this.verifyInfo)).then(function(t){r.resetForm(e),r.$message("注册成功"),r.$router.push({path:"/login"})}).catch(function(e){r.isDisable=!1,r.$message.error(e.messages.error.message)}):this.$api.registerEmail(s()({country:this.registerForm.country.id,email:this.registerForm.email,nickName:this.registerForm.nickName,password:this.registerForm.password,password1:this.registerForm.comfirPassword},this.verifyInfo)).then(function(t){r.resetForm(e),r.$message("注册成功"),r.$router.push({path:"/login"})}).catch(function(e){r.isDisable=!1,r.$message.error(e.messages.error.message)})},getCode:function(e){var r=this,t=[];this.$refs.registerForm.validateField(["mobile","country","password","comfirPassword","nickName","email"],function(e){if(e)return!1;if(!e){if(t.push(!e),4!=t.length)return!1;"mobileRegister"==r.registration?r.$api.registerMobile(s()({mobile:"+"+r.registerForm.country.tel+r.registerForm.mobile,action:"validateMobileSend",country:r.registerForm.country.id},r.verify,{sign:"168node"})).then(function(e){r.verify=e.messages.data.verifyInfo,r.$message("验证码发送成功"),setTimeout(function(){Object(n.b)("getCode")},500)}).catch(function(e){"verify_required"==e.messages.error.code?(r.isAliyun=!0,setTimeout(function(){Object(n.a)("",function(e){r.isAliyun=!1,r.verify=e.messages.data,r.getCode("getCode")})},500)):r.$message.error(e.messages.error.message)}):r.$api.registerEmail(s()({email:r.registerForm.email,action:"validateEmailSend"},r.verify)).then(function(e){r.$message("验证码发送成功"),r.verify=e.messages.data.verifyInfo,setTimeout(function(){Object(n.b)("getCode")},500)}).catch(function(e){"verify_required"==e.messages.error.code?(r.isAliyun=!0,setTimeout(function(){Object(n.a)("",function(e){r.isAliyun=!1,r.verify=e.messages.data,r.getCode("getCode")})},500)):r.$message.error(e.messages.error.message)})}})},getCountry:function(e,r){"register"==r&&(this.registerForm.country=e)},resetForm:function(e){this.$refs[e].resetFields()}}},l={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"userOperate",attrs:{id:"userOperate"}},[t("el-row",{staticClass:"userAction"},[t("el-col",{staticClass:"center",attrs:{span:12}},[t("img",{attrs:{src:"/static/image/loignImg.png",width:"408"}})]),e._v(" "),t("el-col",{staticClass:"userActionItem",attrs:{span:12}},[t("p",{staticClass:"userActionTitle center"},[t("span",{directives:[{name:"show",rawName:"v-show",value:"mobileRegister"==e.registration,expression:"registration =='mobileRegister'"}],staticClass:"loginTips"},[e._v("手机注册")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:"emailRegister"==e.registration,expression:"registration =='emailRegister'"}],staticClass:"loginTips"},[e._v("邮箱注册")])]),e._v(" "),t("el-form",{ref:"registerForm",attrs:{model:e.registerForm,rules:e.registerRules,disabled:e.isDisable},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{prop:"nickName"}},[t("el-input",{attrs:{placeholder:"昵称",autocomplete:"off",maxlength:"20"},model:{value:e.registerForm.nickName,callback:function(r){e.$set(e.registerForm,"nickName",r)},expression:"registerForm.nickName"}},[t("img",{attrs:{slot:"prefix",src:"/static/image/login_icon_user.png"},slot:"prefix"})])],1),e._v(" "),"mobileRegister"==e.registration?t("el-form-item",{attrs:{prop:"mobile"}},[t("el-input",{staticClass:"phoneInput",attrs:{placeholder:"手机号",autocomplete:"off",maxlength:"20"},model:{value:e.registerForm.mobile,callback:function(r){e.$set(e.registerForm,"mobile",r)},expression:"registerForm.mobile"}},[t("img",{attrs:{slot:"prefix",src:"/static/image/login_icon_phone.png"},slot:"prefix"})]),e._v(" "),t("country",{on:{getCountry:function(r){return e.getCountry(r,"register")}}})],1):e._e(),e._v(" "),"emailRegister"==e.registration?t("el-form-item",{attrs:{prop:"email"}},[t("el-input",{attrs:{placeholder:"邮箱",autocomplete:"off",maxlength:"50"},model:{value:e.registerForm.email,callback:function(r){e.$set(e.registerForm,"email",r)},expression:"registerForm.email"}},[t("img",{attrs:{slot:"prefix",src:"/static/image/login_icon_email.png"},slot:"prefix"})])],1):e._e(),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"密码",autocomplete:"off",maxlength:"20","show-password":""},model:{value:e.registerForm.password,callback:function(r){e.$set(e.registerForm,"password",r)},expression:"registerForm.password"}},[t("img",{attrs:{slot:"prefix",src:"/static/image/login_icon_psw.png"},slot:"prefix"})])],1),e._v(" "),t("el-form-item",{attrs:{prop:"comfirPassword"}},[t("el-input",{attrs:{type:"password",placeholder:"确认密码",autocomplete:"off",maxlength:"20","show-password":""},model:{value:e.registerForm.comfirPassword,callback:function(r){e.$set(e.registerForm,"comfirPassword",r)},expression:"registerForm.comfirPassword"}},[t("img",{attrs:{slot:"prefix",src:"/static/image/login_icon_psw.png"},slot:"prefix"})])],1),e._v(" "),t("el-form-item",{attrs:{prop:"verifyCode"}},[t("el-input",{attrs:{placeholder:"mobileRegister"==e.registration?"手机验证码":"邮箱验证码",autocomplete:"off",maxlength:"6"},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.checkCode("registerForm")}},model:{value:e.registerForm.verifyCode,callback:function(r){e.$set(e.registerForm,"verifyCode",r)},expression:"registerForm.verifyCode"}},[t("img",{attrs:{slot:"prefix",src:"/static/image/login_icon_code.png"},slot:"prefix"})]),e._v(" "),t("button",{staticClass:"roundBtn rimBtn getCodeBtn",attrs:{type:"button",id:"getCode"},on:{click:function(r){return e.getCode("getCode")}}},[e._v("获取验证码")])],1),e._v(" "),t("el-form-item",[t("div",{staticClass:"userActionTips"},[t("div",[e._v("\n              已有账号,\n              "),t("router-link",{staticClass:"check",attrs:{to:"/login"}},[e._v("去登录")])],1),e._v(" "),t("div",[t("span",{directives:[{name:"show",rawName:"v-show",value:"mobileRegister"!==e.registration,expression:"registration !=='mobileRegister'"}],staticClass:"check",on:{click:function(r){e.registration="mobileRegister",e.resetForm("registerForm"),e.isDisable=!1}}},[e._v("手机注册")]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:"emailRegister"!==e.registration,expression:"registration !=='emailRegister'"}],staticClass:"check",on:{click:function(r){e.registration="emailRegister",e.resetForm("registerForm"),e.isDisable=!1}}},[e._v("邮箱注册")])])])]),e._v(" "),t("el-form-item",{staticClass:"operateBtn center"},[t("button",{staticClass:"roundBtn",attrs:{type:"button",disabled:e.isDisable},on:{click:function(r){return e.checkCode("registerForm")}}},[e._v("确认注册")])])],1)],1)],1),e._v(" "),t("el-dialog",{staticClass:"dialogTitle",attrs:{visible:e.isAliyun,width:"350px","close-on-click-modal":!1},on:{"update:visible":function(r){e.isAliyun=r}}},[t("div",{staticClass:"header-title",attrs:{slot:"title"},slot:"title"},[t("span",{staticClass:"title-age"},[e._v("人机验证")])]),e._v(" "),t("div",{attrs:{id:"captcha"}})])],1)},staticRenderFns:[]};var m=t("VU/8")(c,l,!1,function(e){t("kGhP")},"data-v-5fd8fc6f",null);r.default=m.exports},kGhP:function(e,r){}});
//# sourceMappingURL=1.0bab91be37ffb0d6c1d6.js.map